<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nourish Lifestyle</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-firestore.js"></script>
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyBvONbLQcR-XqSsJ9hi7xAsk8sTwej43aA",
            authDomain: "ed-project-42419.firebaseapp.com",
            projectId: "ed-project-42419",
            storageBucket: "ed-project-42419.appspot.com",
            messagingSenderId: "909551078814",
            appId: "1:909551078814:web:456608495b9655eef6da8f"
        };
        firebase.initializeApp(firebaseConfig);
    </script>

    <script src="app.js"></script>

    <style>
        .progress-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) 0deg, #e5e7eb 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-circle::before {
            content: attr(data-progress) '%';
            display: flex;
            align-items: center;
            justify-content: center;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--background-color);
            font-size: 1.5rem;
            font-weight: bold;
        }

        :root {
            --primary-color: #3b82f6;
            --secondary-color: #1e40af;
            --background-color: #ffffff;
            --text-color: #1f2937;
            --card-background: #ffffff;
            --card-border: #e5e7eb;
        }

        .dark {
            --primary-color: #60a5fa;
            --secondary-color: #93c5fd;
            --background-color: #1f2937;
            --text-color: #f3f4f6;
            --card-background: #374151;
            --card-border: #4b5563;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .card {
            background-color: var(--card-background);
            border: 1px solid var(--card-border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .tab-trigger {
            padding: 0.5rem 1rem;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-trigger.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
        }

        .accordion-item {
            border-bottom: 1px solid var(--card-border);
        }

        .accordion-trigger {
            width: 100%;
            text-align: left;
            padding: 1rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .accordion-trigger:hover {
            color: var(--primary-color);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .accordion-content.active {
            max-height: 1000px;
        }

        .progress-bar {
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col transition-colors duration-300">
    <header class="p-4 flex justify-between items-center sticky top-0 z-50 frosted-bg">
        <div class="text-2xl font-bold">
            <a href="index.html" class="text-blue-600">Nourish</a>
        </div>
        <nav class="hidden md:flex space-x-4">
            <a href="#" onclick="ExerciseORPreferences('e')" class="nav-link text-sm uppercase tracking-wider hover:text-blue-500 transition-colors">Exercises</a>
            <a href="#" onclick="RoutineFinder()" class="nav-link text-sm uppercase tracking-wider hover:text-blue-500 transition-colors">Routines</a>
            <a href="#" onclick="PreferencesCheck('d')" class="nav-link text-sm uppercase tracking-wider hover:text-blue-500 transition-colors">Diets</a>
            <a href="AiTutor.html" class="nav-link text-sm uppercase tracking-wider hover:text-blue-500 transition-colors">Tutor</a>
            <a onclick="preferencechooser()" class="nav-link text-sm uppercase tracking-wider hover:text-blue-500 transition-colors">Preferences</a>
            <a href="Profile.html" class="nav-link text-sm uppercase tracking-wider hover:text-blue-500 transition-colors">Profile</a>
        </nav>
        <div class="flex items-center space-x-4">
            <button id="darkModeToggle" class="focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden dark:inline-block"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y1="4.22"></line></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block dark:hidden"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </button>
            <button id="menuToggle" class="md:hidden focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
        </div>
    </header>

    <main class="flex-grow p-4 md:p-6 lg:p-8">
        <div class="max-w-7xl mx-auto">
            <div id="overviewCard" class="card mb-8">
            </div>

            <div id="challengeCard" class="card mb-8">
                <h3 class="text-xl font-semibold mb-4 text-center">30-Day Challenge</h3>
                <div class="flex items-center justify-center mb-4">
                    <div class="progress-circle" data-progress="0"></div>
                    <div class="ml-4 text-center">
                        <p class="text-lg font-semibold mb-2">Days Completed: <span id="daysCompleted">0</span>/30</p>
                        <button id="markDayButton" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">Mark Today as Completed</button>
                    </div>
                </div>
                <button id="completeChallengeButton" class="w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors opacity-50 cursor-not-allowed" disabled>Complete 30-Day Challenge</button>
                <button id="finishDietButton" class="mt-4 w-full bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-colors opacity-0 cursor-not-allowed" disabled style="display: none;">Finish Diet</button>
            </div>

            <div class="tabs mb-8">
                <div class="tab-list grid w-full grid-cols-4">
                    <button class="tab-trigger active" data-tab="foods">Foods</button>
                    <button class="tab-trigger" data-tab="meal-plan">Meal Plan</button>
                    <button class="tab-trigger" data-tab="benefits">Benefits</button>
                    <button class="tab-trigger" data-tab="considerations">Considerations</button>
                </div>
                <div id="tabContent" class="tab-content">
                </div>
            </div>

            <div id="foodChartCard" class="card mb-8 shadow-lg rounded-lg overflow-hidden">
                <h3 class="text-2xl font-bold text-center text-gray-800 mb-4">Generate Food Chart</h3>
                <div id="foodChartContent" class="p-6 bg-gray-100 rounded-lg">
                    <p class="text-center text-gray-600">Generate food personalized chart based on needs...</p>
                    <div class="mt-4">
                        <label for="cuisineInput" class="block text-gray-700">Enter Cuisine:</label>
                        <input type="text" id="cuisineInput" placeholder="e.g., Italian, Mexican, Indian" class="mt-2 p-2 border rounded w-full">
                    </div>
                </div>
                <button id="generateFoodChartButton" onclick="generateDailyMealPlan();" class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold mt-4">Generate Food Chart</button>
            </div>
            <div id="MealPlanTableDIV" class="relative overflow-x-auto">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400" id="MealPlanTable">
                </table>
            </div>
            </div>
            <div id="aiCheckerCard" class="card mb-8">
                <h3 class="text-xl font-semibold mb-4">Lifestyle Compatibility Checker</h3>
                <div class="flex space-x-2 mb-4">
                    <input type="text" id="foodInput" placeholder="Enter a food to check..." class="flex-grow p-2 border rounded">
                    <button id="checkButton" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">Check</button>
                </div>
                <div id="aiResponse" class="hidden p-4 rounded-md"></div>
            </div>
        </div>
    </main>

    <footer class="py-4 text-center text-gray-600">
        <p>&copy; 2024 Nourish Lifestyle. All rights reserved.</p>
    </footer>

    <script>
        const DietsDB = [
    {
        "name": "Zone Diet",
        "description": "Balances macronutrients (proteins, carbohydrates, and fats) to reduce inflammation.",
        "averageCalories": 1500,
        "macronutrients": {
            "carbs": 40,
            "protein": 30,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Protein", "amount": "60-120g", "unit": "per day" },
            { "name": "Fiber", "amount": "25g", "unit": "per day" },
            { "name": "Omega-3", "amount": "1-2g", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Lean Proteins",
                "icon": "fish",
                "foods": ["Chicken", "Fish (Salmon, Tuna)", "Eggs", "Tofu", "Lentils"]
            },
            {
                "name": "Low Glycemic Vegetables",
                "icon": "leaf",
                "foods": ["Broccoli", "Spinach", "Cucumbers", "Tomatoes", "Bell Peppers"]
            },
            {
                "name": "Fruits",
                "icon": "apple",
                "foods": ["Apples", "Berries", "Oranges", "Grapefruit"]
            },
            {
                "name": "Healthy Fats",
                "icon": "oil",
                "foods": ["Olive Oil", "Nuts (Almonds, Walnuts)", "Avocados"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Egg white omelette with spinach and avocado",
                    "Greek yogurt with berries and almonds"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken with mixed greens and olive oil dressing",
                    "Lentil soup with a side of cucumber salad"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked salmon with steamed vegetables",
                    "Tofu stir-fry with broccoli and bell peppers"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Mixed nuts",
                    "Fresh fruit"
                ]
            }
        ],
        "benefits": [
            "May aid in weight loss and improve overall health",
            "Balances energy levels",
            "Reduces inflammation"
        ],
        "considerations": [
            "Requires portion control to maintain balance of macronutrients",
            "May be difficult to follow in social settings"
        ],
        "category": "Weight Management",
        "keywords": ["Weight Loss", "Energy", "Metabolism", "Performance"],
        "dietTypes": ["veg", "non-veg", "egg"]
    },
    {
        "name": "Keto Diet",
        "description": "A low-carb, high-fat diet that shifts the body into ketosis for fat burning.",
        "averageCalories": 1800,
        "macronutrients": {
            "carbs": 5,
            "protein": 20,
            "fat": 75
        },
        "keyNutrients": [
            { "name": "Fat", "amount": "150-165g", "unit": "per day" },
            { "name": "Protein", "amount": "90-100g", "unit": "per day" },
            { "name": "Carbohydrates", "amount": "20-50g", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Healthy Fats",
                "icon": "oil",
                "foods": ["Avocado", "Coconut Oil", "Olive Oil", "Butter", "Cheese"]
            },
            {
                "name": "Proteins",
                "icon": "drumstick",
                "foods": ["Eggs", "Meat", "Fish", "Poultry"]
            },
            {
                "name": "Low-Carb Vegetables",
                "icon": "leaf",
                "foods": ["Spinach", "Kale", "Broccoli", "Cauliflower", "Zucchini"]
            },
            {
                "name": "Nuts and Seeds",
                "icon": "seedling",
                "foods": ["Almonds", "Walnuts", "Chia Seeds", "Flaxseeds"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Bacon and eggs with avocado",
                    "Keto smoothie with coconut milk, berries, and chia seeds"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Chicken salad with mixed greens and olive oil dressing",
                    "Tuna lettuce wraps with mayo"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Steak with buttered vegetables",
                    "Salmon with asparagus and hollandaise sauce"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Cheese cubes",
                    "Hard-boiled eggs",
                    "Handful of nuts"
                ]
            }
        ],
        "benefits": [
            "Promotes fat loss",
            "Improves mental focus",
            "May reduce seizures in epilepsy patients"
        ],
        "considerations": [
            "Initial adaptation period can be challenging ('keto flu')",
            "May be difficult to maintain long-term",
            "Requires careful planning to ensure adequate nutrient intake"
        ],
        "category": "Weight Loss",
        "keywords": ["Weight Loss", "Energy", "Performance", "Metabolism"],
        "dietTypes": ["non-veg", "egg"]
    },
    {
        "name": "Mediterranean Diet",
        "description": "Focuses on whole foods like fruits, vegetables, and healthy fats such as olive oil.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 50,
            "protein": 20,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "25-35g", "unit": "per day" },
            { "name": "Omega-3", "amount": "1-2g", "unit": "per day" },
            { "name": "Vitamin C", "amount": "65-90mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["Tomatoes", "Spinach", "Olives", "Grapes", "Oranges"]
            },
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Whole Wheat Bread", "Brown Rice", "Quinoa", "Oats"]
            },
            {
                "name": "Healthy Fats",
                "icon": "oil",
                "foods": ["Olive Oil", "Nuts", "Avocados"]
            },
            {
                "name": "Lean Proteins",
                "icon": "fish",
                "foods": ["Fish", "Poultry", "Legumes", "Eggs"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Greek yogurt with honey and walnuts",
                    "Whole grain toast with avocado and tomato"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled fish with quinoa and roasted vegetables",
                    "Lentil soup with whole grain bread"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Chicken souvlaki with Greek salad",
                    "Vegetable and chickpea stew"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Fresh fruit",
                    "Handful of nuts",
                    "Hummus with vegetable sticks"
                ]
            }
        ],
        "benefits": [
            "Supports heart health",
            "Boosts metabolism",
            "May reduce risk of chronic diseases"
        ],
        "considerations": [
            "Higher in fat than some other diets, though mostly healthy fats",
            "May require more time for meal preparation",
            "Portion control still important for weight management"
        ],
        "category": "Cardio Health",
        "keywords": ["Cardio Health", "Flexibility", "Endurance", "Metabolism"],
        "dietTypes": ["veg", "non-veg", "egg"]
    },
    {
        "name": "Paleo Diet",
        "description": "Based on foods that could be hunted or gathered in prehistoric times, like meat, fish, vegetables, and nuts.",
        "averageCalories": 2200,
        "macronutrients": {
            "carbs": 25,
            "protein": 30,
            "fat": 45
        },
        "keyNutrients": [
            { "name": "Protein", "amount": "100-120g", "unit": "per day" },
            { "name": "Fiber", "amount": "20-30g", "unit": "per day" },
            { "name": "Omega-3", "amount": "1-2g", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Lean Meats",
                "icon": "drumstick",
                "foods": ["Grass-fed Beef", "Chicken", "Turkey", "Pork"]
            },
            {
                "name": "Fish and Seafood",
                "icon": "fish",
                "foods": ["Salmon", "Tuna", "Mackerel", "Shrimp"]
            },
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["Berries", "Leafy Greens", "Sweet Potatoes", "Broccoli"]
            },
            {
                "name": "Nuts and Seeds",
                "icon": "seedling",
                "foods": ["Almonds", "Walnuts", "Pumpkin Seeds", "Sunflower Seeds"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Eggs with avocado and berries",
                    "Smoothie with almond milk, banana, and almond butter"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken salad with mixed vegetables",
                    "Tuna wrapped in lettuce leaves with fruit"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Grilled steak with roasted vegetables",
                    "Baked salmon with sweet potato and asparagus"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Mixed nuts",
                    "Apple slices with almond butter",
                    "Beef jerky"
                ]
            }
        ],
        "benefits": [
            "May improve strength and overall energy",
            "Can aid in weight loss",
            "May reduce inflammation"
        ],
        "considerations": [
            "Eliminates whole grains and legumes, which are nutritious",
            "Can be expensive due to emphasis on quality meats",
            "May be challenging for vegetarians or vegans"
        ],
        "category": "Strength",
        "keywords": ["Strength", "Energy", "Performance", "Power"],
        "dietTypes": ["non-veg", "egg"]
    },
    {
        "name": "Plant-Based Diet",
        "description": "Focuses on foods primarily from plants, including fruits, vegetables, nuts, seeds, oils, and whole grains.",
        "averageCalories": 1800,
        "macronutrients": {
            "carbs": 55,
            "protein": 15,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "30-40g", "unit": "per day" },
            { "name": "Vitamin C", "amount": "65-90mg", "unit": "per day" },
            { "name": "Iron", "amount": "18mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["Leafy Greens", "Berries", "Citrus Fruits", "Cruciferous Vegetables"]
            },
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Quinoa", "Brown Rice", "Oats", "Whole Wheat Pasta"]
            },
            {
                "name": "Legumes",
                "icon": "seedling",
                "foods": ["Lentils", "Chickpeas", "Black Beans", "Tofu"]
            },
            {
                "name": "Nuts and Seeds",
                "icon": "seedling",
                "foods": ["Almonds", "Chia Seeds", "Flaxseeds", "Walnuts"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Oatmeal with berries and nut butter",
                    "Tofu scramble with vegetables"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Quinoa salad with mixed vegetables and chickpeas",
                    "Lentil soup with whole grain bread"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Stir-fry vegetables with tofu and brown rice",
                    "Black bean and sweet potato tacos"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Apple slices with almond butter",
                    "Carrot sticks with hummus",
                    "Trail mix with nuts and dried fruit"
                ]
            }
        ],
        "benefits": [
            "May enhance immune function",
            "Promotes detoxification",
            "Can lower risk of chronic diseases"
        ],
        "considerations": [
            "May require B12 supplementation",
            "Need to ensure adequate protein intake",
            "Some may find it challenging to meet calorie needs"
        ],
        "category": "Immune Support",
        "keywords": ["Detox", "Immune Support", "Hydration", "Recovery"],
        "dietTypes": ["veg"]
    },
    {
        "name": "High-Protein Diet",
        "description": "Emphasizes protein intake to support muscle gain and recovery.",
        "averageCalories": 2500,
        "macronutrients": {
            "carbs": 30,
            "protein": 40,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Protein", "amount": "1.6-2.2g", "unit": "per kg of body weight" },
            { "name": "Branched-chain amino acids", "amount": "5-10g", "unit": "per day" },
            { "name": "Creatine", "amount": "3-5g", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Lean Meats",
                "icon": "drumstick",
                "foods": ["Chicken Breast", "Turkey", "Lean Beef", "Pork Loin"]
            },
            {
                "name": "Fish and Seafood",
                "icon": "fish",
                "foods": ["Salmon", "Tuna", "Tilapia", "Shrimp"]
            },
            {
                "name": "Dairy",
                "icon": "cheese",
                "foods": ["Greek Yogurt", "Cottage Cheese", "Whey Protein"]
            },
            {
                "name": "Plant-based Proteins",
                "icon": "seedling",
                "foods": ["Lentils", "Chickpeas", "Tofu", "Quinoa"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Egg white omelette with spinach and turkey",
                    "Greek yogurt with berries and protein powder"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken breast with quinoa and vegetables",
                    "Tuna salad with mixed greens"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Lean beef stir-fry with brown rice",
                    "Baked salmon with sweet potato and broccoli"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Protein shake",
                    "Cottage cheese with fruit",
                    "Hard-boiled eggs"
                ]
            }
        ],
        "benefits": [
            "Supports muscle growth and recovery",
            "May aid in weight loss",
            "Can improve satiety"
        ],
        "considerations": [
            "May be hard on the kidneys if protein intake is excessive",
            "Can be challenging for vegetarians",
            "Requires careful planning to ensure balanced nutrition"
        ],
        "category": "Muscle Gain",
        "keywords": ["Muscle Gain", "Strength", "Recovery", "Core Stability"],
        "dietTypes": ["veg", "non-veg", "egg"]
    },
    {
        "name": "Intermittent Fasting",
        "description": "Cycles between periods of eating and fasting to promote fat loss and improve metabolism.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 40,
            "protein": 30,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "All essential nutrients", "amount": "100%", "unit": "of daily needs during eating window" }
        ],
        "foodCategories": [
            {
                "name": "Proteins",
                "icon": "drumstick",
                "foods": ["Lean Meats", "Fish", "Eggs", "Legumes"]
            },
            {
                "name": "Complex Carbohydrates",
                "icon": "bread",
                "foods": ["Whole Grains", "Sweet Potatoes", "Quinoa"]
            },
            {
                "name": "Healthy Fats",
                "icon": "oil",
                "foods": ["Avocado", "Nuts", "Olive Oil", "Fatty Fish"]
            },
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["Berries", "Leafy Greens", "Cruciferous Vegetables"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Eating Window",
                "options": [
                    "Balanced meal with protein, complex carbs, and vegetables",
                    "Nutrient-dense smoothie with protein powder and fruits",
                    "Large salad with grilled chicken and avocado"
                ]
            },
            {
                "meal": "Fasting Window",
                "options": [
                    "Water",
                    "Herbal tea",
                    "Black coffee"
                ]
            }
        ],
        "benefits": [
            "Aids in weight loss",
            "Improves metabolism",
            "May enhance longevity"
        ],
        "considerations": [
            "Can be challenging to adapt to initially",
            "May not be suitable for everyone (e.g., pregnant women, people with certain medical conditions)",
            "Requires careful planning to ensure adequate nutrient intake during eating windows"
        ],
        "category": "Weight Loss",
        "keywords": ["Weight Loss", "Metabolism", "Energy", "Endurance"],
        "dietTypes": ["veg", "non-veg", "egg"]
    },
    {
        "name": "Vegan Diet",
        "description": "Excludes all animal products and focuses on plant-based foods.",
        "averageCalories": 1800,
        "macronutrients": {
            "carbs": 55,
            "protein": 15,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Vitamin B12", "amount": "2.4mcg", "unit": "per day" },
            { "name": "Iron", "amount": "18mg", "unit": "per day" },
            { "name": "Calcium", "amount": "1000mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["Leafy Greens", "Berries", "Citrus Fruits", "Root Vegetables"]
            },
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Quinoa", "Brown Rice", "Oats", "Whole Wheat Pasta"]
            },
            {
                "name": "Legumes",
                "icon": "seedling",
                "foods": ["Lentils", "Chickpeas", "Black Beans", "Tofu"]
            },
            {
                "name": "Nuts and Seeds",
                "icon": "seedling",
                "foods": ["Almonds", "Chia Seeds", "Flaxseeds", "Walnuts"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Smoothie bowl with plant-based protein powder",
                    "Tofu scramble with vegetables and whole grain toast"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Lentil and vegetable soup with whole grain bread",
                    "Buddha bowl with quinoa, roasted vegetables, and tahini dressing"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Stir-fry tofu with mixed vegetables and brown rice",
                    "Chickpea curry with cauliflower rice"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Hummus with vegetable sticks",
                    "Trail mix with nuts and dried fruit",
                    "Apple slices with almond butter"
                ]
            }
        ],
        "benefits": [
            "Improves digestion",
            "Supports immune function",
            "May lower risk of certain chronic diseases"
        ],
        "considerations": [
            "Requires careful planning to ensure adequate protein, vitamin B12, iron, and calcium intake",
            "May need to supplement certain nutrients",
            "Can be challenging in social situations or when traveling"
        ],
        "category": "Immune Support",
        "keywords": ["Detox", "Immune Support", "Hydration", "Energy"],
        "dietTypes": ["veg"]
    },
    {
        "name": "Atkins Diet",
        "description": "A low-carbohydrate diet focused on protein and fat consumption.",
        "averageCalories": 1800,
        "macronutrients": {
            "carbs": 10,
            "protein": 30,
            "fat": 60
        },
        "keyNutrients": [
            { "name": "Protein", "amount": "1.2-1.6g", "unit": "per kg of body weight" },
            { "name": "Fiber", "amount": "20-25g", "unit": "per day" },
            { "name": "Omega-3", "amount": "1-2g", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Proteins",
                "icon": "drumstick",
                "foods": ["Beef", "Chicken", "Fish", "Eggs"]
            },
            {
                "name": "Healthy Fats",
                "icon": "oil",
                "foods": ["Olive Oil", "Avocado", "Nuts", "Seeds"]
            },
            {
                "name": "Low-Carb Vegetables",
                "icon": "leaf",
                "foods": ["Spinach", "Broccoli", "Cauliflower", "Zucchini"]
            },
            {
                "name": "Dairy",
                "icon": "cheese",
                "foods": ["Cheese", "Heavy Cream", "Butter"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Bacon and eggs with avocado",
                    "Low-carb smoothie with protein powder and berries"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Chicken salad with mixed greens and olive oil dressing",
                    "Tuna lettuce wraps with mayo"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Steak with buttered vegetables",
                    "Baked salmon with asparagus"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Hard-boiled eggs",
                    "Cheese cubes",
                    "Handful of nuts"
                ]
            }
        ],
        "benefits": [
            "Helps with weight loss",
            "Boosts energy",
            "May improve blood sugar control"
        ],
        "considerations": [
            "Initial phase can be very restrictive",
            "May lead to nutrient deficiencies if not carefully planned",
            "Can be high in saturated fat"
        ],
        "category": "Weight Loss",
        "keywords": ["Weight Loss", "Energy", "Metabolism", "Power"],
        "dietTypes": ["non-veg", "egg"]
    },
    {
        "name": "DASH Diet",
        "description": "Designed to lower blood pressure by emphasizing vegetables, fruits, and low-fat dairy.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 55,
            "protein": 18,
            "fat": 27
        },
        "keyNutrients": [
            { "name": "Sodium", "amount": "1500-2300mg", "unit": "per day" },
            { "name": "Potassium", "amount": "4700mg", "unit": "per day" },
            { "name": "Calcium", "amount": "1250mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["Leafy Greens", "Berries", "Bananas", "Oranges"]
            },
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Whole Wheat Bread", "Brown Rice", "Oatmeal"]
            },
            {
                "name": "Lean Proteins",
                "icon": "drumstick",
                "foods": ["Skinless Poultry", "Fish", "Beans"]
            },
            {
                "name": "Low-Fat Dairy",
                "icon": "cheese",
                "foods": ["Skim Milk", "Low-Fat Yogurt", "Low-Fat Cheese"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Oatmeal with berries and low-fat milk",
                    "Whole grain toast with avocado and hard-boiled egg"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken salad with mixed vegetables",
                    "Whole grain wrap with turkey and vegetables"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked fish with roasted vegetables and brown rice",
                    "Vegetarian chili with whole grain cornbread"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Fresh fruit",
                    "Low-fat yogurt",
                    "Handful of unsalted nuts"
                ]
            }
        ],
        "benefits": [
            "Improves cardiovascular health",
            "Lowers blood pressure",
            "May reduce risk of diabetes"
        ],
        "considerations": [
            "Requires consistent effort to limit sodium intake",
            "May be challenging for those used to high-salt diets",
            "Requires careful meal planning and preparation"
        ],
        "category": "Cardio Health",
        "keywords": ["Cardio Health", "Endurance", "Flexibility", "Posture"],
        "dietTypes": ["veg", "non-veg", "egg"]
    },
    {
        "name": "Carnivore Diet",
        "description": "A diet that consists entirely of animal products, excluding all plant-based foods.",
        "averageCalories": 2500,
        "macronutrients": {
            "carbs": 0,
            "protein": 50,
            "fat": 50
        },
        "keyNutrients": [
            { "name": "Protein", "amount": "1.5-2.0g", "unit": "per kg of body weight" },
            { "name": "Vitamin B12", "amount": "2.4mcg", "unit": "per day" },
            { "name": "Iron", "amount": "8mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Meats",
                "icon": "drumstick",
                "foods": ["Beef", "Pork", "Chicken", "Lamb"]
            },
            {
                "name": "Fish",
                "icon": "fish",
                "foods": ["Salmon", "Tuna", "Mackerel"]
            },
            {
                "name": "Dairy",
                "icon": "cheese",
                "foods": ["Cheese", "Butter", "Cream"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Steak and eggs",
                    "Bacon"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken thighs",
                    "Pork belly"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Roast beef",
                    "Grilled salmon"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Beef jerky",
                    "Pork rinds"
                ]
            }
        ],
        "benefits": [
            "May lead to weight loss",
            "Simplicity in meal planning",
            "High in protein and fat"
        ],
        "considerations": [
            "Lacks essential nutrients from plants",
            "May lead to nutrient deficiencies",
            "Can be restrictive and hard to maintain"
        ],
        "category": "Weight Loss",
        "keywords": ["Weight Loss", "Protein", "Simplicity"],
        "dietTypes": ["non-veg"]
    },
    {
        "name": "Gluten-Free Diet",
        "description": "Excludes gluten, a protein found in wheat, barley, and rye, to manage gluten-related disorders.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 50,
            "protein": 20,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "25g", "unit": "per day" },
            { "name": "Iron", "amount": "18mg", "unit": "per day" },
            { "name": "Calcium", "amount": "1000mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Gluten-Free Grains",
                "icon": "bread",
                "foods": ["Rice", "Quinoa", "Corn", "Buckwheat"]
            },
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["All fruits and vegetables"]
            },
            {
                "name": "Proteins",
                "icon": "drumstick",
                "foods": ["Meat", "Fish", "Eggs", "Legumes"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Smoothie with gluten-free protein powder",
                    "Oatmeal made with gluten-free oats"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Quinoa salad with mixed vegetables",
                    "Grilled chicken with steamed broccoli"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked fish with roasted sweet potatoes",
                    "Stir-fried tofu with gluten-free soy sauce"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Rice cakes with almond butter",
                    "Fruit"
                ]
            }
        ],
        "benefits": [
            "Helps manage celiac disease and gluten sensitivity",
            "May improve digestive health",
            "Encourages whole food consumption"
        ],
        "considerations": [
            "Can be expensive due to specialty products",
            "May lead to nutrient deficiencies if not well-planned",
            "Requires careful label reading"
        ],
        "category": "Health",
        "keywords": ["Health", "Digestive Health", "Celiac Disease"],
        "dietTypes": ["veg", "non-veg"]
    },
    {
        "name": "Raw Food Diet",
        "description": "Focuses on consuming unprocessed and uncooked foods, primarily fruits, vegetables, nuts, and seeds.",
        "averageCalories": 1800,
        "macronutrients": {
            "carbs": 60,
            "protein": 10,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Vitamin C", "amount": "65-90mg", "unit": "per day" },
            { "name": "Fiber", "amount": "30g", "unit": "per day" },
            { "name": "Iron", "amount": "18mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["All fruits and vegetables"]
            },
            {
                "name": "Nuts and Seeds",
                "icon": "seedling",
                "foods": ["Almonds", "Walnuts", "Chia Seeds"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Smoothie with raw fruits and vegetables",
                    "Chia pudding with almond milk"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Salad with mixed greens and raw vegetables",
                    "Raw vegetable wraps with hummus"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Zucchini noodles with raw tomato sauce",
                    "Stuffed bell peppers with raw nuts and seeds"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Fresh fruit",
                    "Raw nuts"
                ]
            }
        ],
        "benefits": [
            "May improve digestion",
            "Encourages consumption of whole foods",
            "High in vitamins and minerals"
        ],
        "considerations": [
            "Can be difficult to maintain",
            "May lead to nutrient deficiencies",
            "Requires careful planning"
        ],
        "category": "Health",
        "keywords": ["Health", "Raw Foods", "Nutrition"],
        "dietTypes": ["veg"]
    },
    {
        "name": "Pescatarian Diet",
        "description": "Includes fish and seafood in addition to plant-based foods, while excluding other meats.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 50,
            "protein": 25,
            "fat": 25
        },
        "keyNutrients": [
            { "name": "Omega-3", "amount": "1-2g", "unit": "per day" },
            { "name": "Protein", "amount": "50-100g", "unit": "per day" },
            { "name": "Vitamin B12", "amount": "2.4mcg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fish and Seafood",
                "icon": "fish",
                "foods": ["Salmon", "Tuna", "Shrimp"]
            },
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["All fruits and vegetables"]
            },
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Brown Rice", "Quinoa", "Oats"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Smoked salmon on whole grain toast",
                    "Fruit smoothie with spinach"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Quinoa salad with mixed vegetables and shrimp",
                    "Grilled fish tacos with cabbage slaw"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked salmon with asparagus",
                    "Vegetable stir-fry with tofu"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Hummus with vegetable sticks",
                    "Greek yogurt with honey"
                ]
            }
        ],
        "benefits": [
            "Supports heart health",
            "High in omega-3 fatty acids",
            "Encourages a variety of foods"
        ],
        "considerations": [
            "May be expensive due to seafood",
            "Requires careful planning to ensure balanced nutrition",
            "Can be challenging in non-pescatarian settings"
        ],
        "category": "Health",
        "keywords": ["Health", "Omega-3", "Nutrition"],
        "dietTypes": ["veg", "non-veg"]
    },
    {
        "name": "Low-FODMAP Diet",
        "description": "Designed to reduce symptoms of irritable bowel syndrome (IBS) by limiting certain carbohydrates.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 40,
            "protein": 25,
            "fat": 35
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "25g", "unit": "per day" },
            { "name": "Protein", "amount": "50-100g", "unit": "per day" },
            { "name": "Vitamin D", "amount": "600 IU", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Low-FODMAP Vegetables",
                "icon": "leaf",
                "foods": ["Carrots", "Spinach", "Zucchini"]
            },
            {
                "name": "Proteins",
                "icon": "drumstick",
                "foods": ["Chicken", "Fish", "Eggs"]
            },
            {
                "name": "Gluten-Free Grains",
                "icon": "bread",
                "foods": ["Rice", "Quinoa", "Oats"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Scrambled eggs with spinach",
                    "Oatmeal with blueberries"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken salad with low-FODMAP dressing",
                    "Quinoa bowl with vegetables"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked fish with steamed carrots",
                    "Stir-fried chicken with zucchini"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Rice cakes with peanut butter",
                    "Fruit"
                ]
            }
        ],
        "benefits": [
            "May reduce IBS symptoms",
            "Encourages whole food consumption",
            "Supports digestive health"
        ],
        "considerations": [
            "Requires careful planning to avoid high-FODMAP foods",
            "Can be restrictive",
            "May lead to nutrient deficiencies if not well-planned"
        ],
        "category": "Health",
        "keywords": ["Health", "Digestive Health", "IBS"],
        "dietTypes": ["veg", "non-veg"]
    },
    {
        "name": "South Beach Diet",
        "description": "A low-carb diet that emphasizes healthy fats and lean proteins while limiting refined carbs.",
        "averageCalories": 1800,
        "macronutrients": {
            "carbs": 40,
            "protein": 30,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "25g", "unit": "per day" },
            { "name": "Protein", "amount": "50-100g", "unit": "per day" },
            { "name": "Omega-3", "amount": "1-2g", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Lean Proteins",
                "icon": "drumstick",
                "foods": ["Chicken", "Turkey", "Fish"]
            },
            {
                "name": "Healthy Fats",
                "icon": "oil",
                "foods": ["Olive Oil", "Avocado", "Nuts"]
            },
            {
                "name": "Low-Glycemic Vegetables",
                "icon": "leaf",
                "foods": ["Spinach", "Broccoli", "Cauliflower"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Eggs with spinach and feta",
                    "Smoothie with protein powder and berries"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken salad with olive oil dressing",
                    "Tuna salad with mixed greens"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked salmon with asparagus",
                    "Stir-fried chicken with vegetables"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Nuts",
                    "Vegetable sticks with hummus"
                ]
            }
        ],
        "benefits": [
            "May aid in weight loss",
            "Encourages healthy eating habits",
            "Supports heart health"
        ],
        "considerations": [
            "Requires careful planning to avoid refined carbs",
            "May be challenging in social settings",
            "Can be restrictive"
        ],
        "category": "Weight Loss",
        "keywords": ["Weight Loss", "Heart Health", "Nutrition"],
        "dietTypes": ["non-veg", "egg"]
    },
    {
        "name": "Flexitarian Diet",
        "description": "A flexible vegetarian diet that emphasizes plant-based foods while allowing for occasional meat and fish.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 50,
            "protein": 20,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "30g", "unit": "per day" },
            { "name": "Protein", "amount": "50-100g", "unit": "per day" },
            { "name": "Iron", "amount": "18mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["All fruits and vegetables"]
            },
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Brown Rice", "Quinoa", "Oats"]
            },
            {
                "name": "Proteins",
                "icon": "drumstick",
                "foods": ["Chicken", "Fish", "Legumes"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Smoothie with spinach and banana",
                    "Oatmeal with nuts and berries"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Vegetable stir-fry with tofu",
                    "Quinoa salad with chickpeas"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Grilled fish with vegetables",
                    "Pasta with marinara sauce and vegetables"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Fruit",
                    "Nuts"
                ]
            }
        ],
        "benefits": [
            "Encourages a variety of foods",
            "Supports heart health",
            "May aid in weight loss"
        ],
        "considerations": [
            "Requires careful planning to ensure balanced nutrition",
            "Can be challenging in non-flexitarian settings",
            "May lead to nutrient deficiencies if not well-planned"
        ],
        "category": "Health",
        "keywords": ["Health", "Flexibility", "Nutrition"],
        "dietTypes": ["veg", "non-veg"]
    },
    {
        "name": "Whole30 Diet",
        "description": "Focuses on whole, unprocessed foods for 30 days to reset metabolism.",
        "averageCalories": 1500,
        "macronutrients": {
            "carbs": 40,
            "protein": 30,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Protein", "amount": "60-120g", "unit": "per day" },
            { "name": "Fiber", "amount": "25g", "unit": "per day" },
            { "name": "Omega-3", "amount": "1-2g", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Lean Proteins",
                "icon": "fish",
                "foods": ["Chicken", "Fish (Salmon, Tuna)", "Eggs", "Tofu", "Lentils"]
            },
            {
                "name": "Low Glycemic Vegetables",
                "icon": "leaf",
                "foods": ["Broccoli", "Spinach", "Cucumbers", "Tomatoes", "Bell Peppers"]
            },
            {
                "name": "Fruits",
                "icon": "apple",
                "foods": ["Apples", "Berries", "Oranges", "Grapefruit"]
            },
            {
                "name": "Healthy Fats",
                "icon": "oil",
                "foods": ["Olive Oil", "Nuts (Almonds, Walnuts)", "Avocados"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Egg white omelette with spinach and avocado",
                    "Greek yogurt with berries and almonds"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Grilled chicken with mixed greens and olive oil dressing",
                    "Lentil soup with a side of cucumber salad"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked salmon with steamed vegetables",
                    "Tofu stir-fry with broccoli and bell peppers"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Mixed nuts",
                    "Fresh fruit"
                ]
            }
        ],
        "benefits": [
            "May aid in weight loss and improve overall health",
            "Balances energy levels",
            "Reduces inflammation"
        ],
        "considerations": [
            "Requires portion control to maintain balance of macronutrients",
            "May be difficult to follow in social settings"
        ],
        "category": "Weight Management",
        "keywords": ["Weight Loss", "Energy", "Metabolism", "Performance"],
        "dietTypes": ["veg", "non-veg", "egg"]
    },
    {
        "name": "Ayurvedic Diet",
        "description": "Based on balancing the body's energies through food choices according to doshas.",
        "averageCalories": 1800,
        "macronutrients": {
            "carbs": 50,
            "protein": 20,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "25g", "unit": "per day" },
            { "name": "Protein", "amount": "50-100g", "unit": "per day" },
            { "name": "Vitamin C", "amount": "65-90mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Fruits and Vegetables",
                "icon": "apple",
                "foods": ["All fruits and vegetables"]
            },
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Brown Rice", "Quinoa", "Oats"]
            },
            {
                "name": "Spices",
                "icon": "leaf",
                "foods": ["Turmeric", "Cumin", "Coriander"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Oatmeal with fruits and nuts",
                    "Smoothie with spinach and banana"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Quinoa salad with mixed vegetables",
                    "Lentil soup with spices"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Baked fish with steamed vegetables",
                    "Vegetable curry with brown rice"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Fresh fruit",
                    "Nuts"
                ]
            }
        ],
        "benefits": [
            "Promotes balance and well-being",
            "Encourages whole food consumption",
            "Supports digestive health"
        ],
        "considerations": [
            "Requires careful planning to ensure balanced nutrition",
            "Can be challenging in non-Ayurvedic settings",
            "May lead to nutrient deficiencies if not well-planned"
        ],
        "category": "Health",
        "keywords": ["Health", "Balance", "Nutrition"],
        "dietTypes": ["veg", "non-veg"]
    },
    {
        "name": "Macrobiotic Diet",
        "description": "Emphasizes whole grains, vegetables, and beans to promote health and longevity.",
        "averageCalories": 2000,
        "macronutrients": {
            "carbs": 50,
            "protein": 20,
            "fat": 30
        },
        "keyNutrients": [
            { "name": "Fiber", "amount": "30g", "unit": "per day" },
            { "name": "Protein", "amount": "50-100g", "unit": "per day" },
            { "name": "Iron", "amount": "18mg", "unit": "per day" }
        ],
        "foodCategories": [
            {
                "name": "Whole Grains",
                "icon": "bread",
                "foods": ["Brown Rice", "Quinoa", "Barley"]
            },
            {
                "name": "Vegetables",
                "icon": "leaf",
                "foods": ["Kale", "Carrots", "Broccoli"]
            },
            {
                "name": "Legumes",
                "icon": "seedling",
                "foods": ["Lentils", "Chickpeas", "Black Beans"]
            }
        ],
        "mealPlan": [
            {
                "meal": "Breakfast",
                "options": [
                    "Brown rice porridge with fruits",
                    "Smoothie with greens and seeds"
                ]
            },
            {
                "meal": "Lunch",
                "options": [
                    "Quinoa bowl with vegetables and beans",
                    "Miso soup with seaweed"
                ]
            },
            {
                "meal": "Dinner",
                "options": [
                    "Stir-fried vegetables with brown rice",
                    "Vegetable stew with whole grains"
                ]
            },
            {
                "meal": "Snacks",
                "options": [
                    "Fresh fruit",
                    "Nuts"
                ]
            }
        ],
        "benefits": [
            "Promotes health and longevity",
            "Encourages whole food consumption",
            "Supports digestive health"
        ],
        "considerations": [
            "Requires careful planning to ensure balanced nutrition",
            "Can be challenging in non-macrobiotic settings",
            "May lead to nutrient deficiencies if not well-planned"
        ],
        "category": "Health",
        "keywords": ["Health", "Longevity", "Nutrition"],
        "dietTypes": ["veg", "non-veg"]
    }
];

        // Global variable to store lifestyle data
        let lifestyleData;
        let unsubscribe;

        function dietFetcher(callback) {
            firebase.auth().onAuthStateChanged(user => {
                if (user) {
                    console.log("User authenticated");
                    const thingsRef = firebase.firestore().collection('dietPlans');
                    unsubscribe = thingsRef
                        .where('uid', '==', user.uid)
                        .onSnapshot(querySnapshot => {
                            console.log("Fetching data");
                            if (querySnapshot.empty) {
                                console.log("No diet plan found for user");
                                callback(null);
                            } else {
                                console.log("Diet plan found");
                                querySnapshot.docs.forEach(doc => {
                                    const dietPlanIndex = Number(doc.data().DietPlan);
                                    if (DietsDB[dietPlanIndex]) {
                                        lifestyleData = DietsDB[dietPlanIndex];
                                        console.log("Lifestyle data set:", lifestyleData);
                                        callback(lifestyleData);
                                    } else {
                                        console.error("Invalid diet plan index");
                                        callback(null);
                                    }
                                });
                            }
                        }, error => {
                            console.error("Error fetching diet plan:", error);
                            callback(null);
                        });
                } else {
                    console.log("User not authenticated");
                    callback(null);
                }
            });
        }

        function initializeApp() {
            dietFetcher((data) => {
                if (data) {
                    console.log("Rendering with data:", data);
                    renderOverviewCard();
                    renderChallengeCard();
                    renderTabs();
                    renderAIChecker();
                } else {
                    console.error("Failed to fetch lifestyle data");
                    document.getElementById('overviewCard').innerHTML = '<p>Failed to load lifestyle data. Please make sure you are logged in and have a diet plan assigned.</p>';
                }
            });
        }

        function renderChallengeCard() {
            const challengeCard = document.getElementById('challengeCard');
            challengeCard.innerHTML = `
                <h3 class="text-xl font-semibold mb-4 text-center">30-Day Challenge</h3>
                <div class="flex items-center justify-center mb-4">
                    <div class="progress-circle" data-progress="0"></div>
                    <div class="ml-4 text-center">
                        <p class="text-lg font-semibold mb-2">Days Completed: <span id="daysCompleted">0</span>/30</p>
                        <button id="markDayButton" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">Mark Today as Completed</button>
                    </div>
                </div>
                <button id="completeChallengeButton" class="w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors opacity-50 cursor-not-allowed" disabled>Complete 30-Day Challenge</button>
                <button id="finishDietButton" class="mt-4 w-full bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-colors opacity-0 cursor-not-allowed" disabled style="display: none;">Finish Diet</button>
            `;

            const markDayButton = document.getElementById('markDayButton');
            const completeChallengeButton = document.getElementById('completeChallengeButton');
            const finishDietButton = document.getElementById('finishDietButton');
            const daysCompletedSpan = document.getElementById('daysCompleted');
            const progressCircle = document.querySelector('.progress-circle');

            let daysCompleted = parseInt(localStorage.getItem('daysCompleted')) || 0;
            daysCompletedSpan.textContent = daysCompleted;

            // Update progress circle on load
            updateProgress();

            // Fetch current progress and check for existing achievement
            firebase.auth().onAuthStateChanged(user => {
                if (user) {
                    // Check if 30-day challenge achievement already exists
                    firebase.firestore().collection('achievements').where('uid', '==', user.uid).where('name', '==', `${lifestyleData.name} 30 day challenge`).get()
                        .then(querySnapshot => {
                            if (!querySnapshot.empty) {
                                completeChallengeButton.classList.add('opacity-50', 'cursor-not-allowed');
                                completeChallengeButton.disabled = true;
                                completeChallengeButton.textContent = 'Challenge Already Completed';
                            }
                        });
                }
            });

            markDayButton.addEventListener('click', () => {
                if (daysCompleted < 30) {
                    daysCompleted++;
                    localStorage.setItem('daysCompleted', daysCompleted);
                    updateProgress();
                }
            });

            completeChallengeButton.addEventListener('click', () => {
                firebase.auth().onAuthStateChanged(user => {
                    if (user) {
                        const date = new Date();
                        let day = date.getDate();
                        let month = date.getMonth() + 1;
                        let year = date.getFullYear();
                        let currentDate = `${day} / ${month} / ${year}`;
                        // Add achievement
                        firebase.firestore().collection('achievements').add({
                            uid: user.uid,
                            name: `${lifestyleData.name} 30 day challenge`,
                            date: currentDate,
                        }).then(() => {
                            alert('Congratulations on completing the 30-day challenge!');
                            completeChallengeButton.classList.add('opacity-50', 'cursor-not-allowed');
                            completeChallengeButton.disabled = true;
                            completeChallengeButton.textContent = 'Challenge Completed';
                        });
                    }
                });
            });
            
            finishDietButton.addEventListener('click', () => {
                firebase.auth().onAuthStateChanged(user => {
                    if (user) {
                        let date = new Date();
                        let day = date.getDate();
                        let month = date.getMonth() + 1;
                        let year = date.getFullYear();
                        let currentDate = `${day} / ${month} / ${year}`;
                        // Add diet completion achievement
                        firebase.firestore().collection('achievements').add({
                            uid: user.uid,
                            name: lifestyleData.name,
                            date: currentDate,
                        }).then(() => {
                            const thingsRef = firebase.firestore().collection('dietPlans');
                            
                            unsubscribe = thingsRef
                                .where('uid', '==', user.uid)
                                .onSnapshot(querySnapshot => {
                                    querySnapshot.forEach(doc => {
                                        thingsRef.doc(doc.id).delete();
                                        console.log("Deleted");
                                    });
                                    setTimeout(() => {
                                        window.location.href = 'index.html';
                                    }, 3000);
                                });
                        });
                    }
                });
            });

            function updateProgress() {
                daysCompletedSpan.textContent = daysCompleted;
                const progress = (daysCompleted / 30) * 100;
                progressCircle.style.background = `conic-gradient(var(--primary-color) ${progress * 3.6}deg, #e5e7eb 0deg)`;
                progressCircle.setAttribute('data-progress', Math.round(progress));

                if (daysCompleted === 30) {
                    completeChallengeButton.classList.remove('opacity-50', 'cursor-not-allowed');
                    completeChallengeButton.removeAttribute('disabled');
                    finishDietButton.style.display = 'block';
                    finishDietButton.classList.remove('opacity-0', 'cursor-not-allowed');
                    finishDietButton.removeAttribute('disabled');
                }
            }
        }

        function initializeDarkMode() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const sunIcon = darkModeToggle.querySelector('[data-lucide="sun"]');
            const moonIcon = darkModeToggle.querySelector('[data-lucide="moon"]');

            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            document.body.classList.toggle('dark', isDarkMode);
            updateDarkModeIcons(isDarkMode);

            darkModeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark');
                const isDark = document.body.classList.contains('dark');
                localStorage.setItem('darkMode', isDark);
                updateDarkModeIcons(isDark);
            });

            function updateDarkModeIcons(isDark) {
                sunIcon.classList.toggle('hidden', !isDark);
                moonIcon.classList.toggle('hidden', isDark);
            }
        }

        function renderOverviewCard() {
            if (!lifestyleData) {
                console.error("Lifestyle data is not available");
                return;
            }

            // Fetch user data to calculate BMI
            const user = firebase.auth().currentUser;
            if (!user) {
                console.error("User is not signed in");
                return;
            }

            db.collection('userData').doc(user.uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        const data = doc.data();
                        const height = data.Height; // in cm
                        const weight = data.Weight; // in kg
                        const bmi = (weight / ((height / 100) ** 2)).toFixed(2); // BMI calculation

                        // Adjust calories based on BMI
                        const calorieAdjustment = 500;
                        const bmiRanges = [
                            { range: [0, 16], adjustment: calorieAdjustment * 2 },
                            { range: [16, 18.5], adjustment: calorieAdjustment }, // Underweight
                            { range: [18.5, 24.9], adjustment: 0 }, // Normal weight
                            { range: [24.9, 29.9], adjustment: -calorieAdjustment }, // Overweight
                            { range: [29.9, 34.9], adjustment: -calorieAdjustment * 1.5 }, // Obesity Class I
                            { range: [34.9, 39.9], adjustment: -calorieAdjustment * 2 }, // Obesity Class II
                            { range: [39.9, Infinity], adjustment: -calorieAdjustment * 2.5 } // Obesity Class III
                        ];
                        const adjustedCalories = lifestyleData.averageCalories + 
                            bmiRanges.find(({ range }) => bmi >= range[0] && bmi < range[1]).adjustment;

                        const overviewCard = document.getElementById('overviewCard');
                        overviewCard.innerHTML = `
                            <h2 class="text-3xl font-bold text-center mb-6">${lifestyleData.name}</h2>
                            <p class="text-center mb-6">${lifestyleData.description}</p>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div class="card">
                                    <h3 class="text-lg font-semibold mb-2">Average Calories</h3>
                                    <p class="text-3xl font-bold text-center" id="caloriesintakeperday">${adjustedCalories}</p>
                                    <p class="text-center">calories per day</p>
                                </div>
                                <div class="card">
                                    <h3 class="text-lg font-semibold mb-2">Macronutrients</h3>
                                    <div class="space-y-2">
                                        ${Object.entries(lifestyleData.macronutrients).map(([nutrient, percentage]) => `
                                            <div>
                                                <div class="flex justify-between mb-1">
                                                    <span class="capitalize">${nutrient}</span>
                                                    <span>${percentage}%</span>
                                                </div>
                                                <div class="progress-bar">
                                                    <div class="progress-bar-fill" style="width: ${percentage}%"></div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                <div class="card">
                                    <h3 class="text-lg font-semibold mb-2">Key Nutrients</h3>
                                    <ul class="space-y-2">
                                        ${lifestyleData.keyNutrients.map(nutrient => `
                                            <li class="flex justify-between">
                                                <span>${nutrient.name}</span>
                                                <span>${nutrient.amount} ${nutrient.unit}</span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                            </div>
                        `;
                    } else {
                        console.error("No user data found");
                    }
                })
                .catch((error) => {
                    console.error("Error fetching user data: ", error);
                });
        }

        function renderTabs() {
            if (!lifestyleData) {
                console.error("Lifestyle data is not available");
                return;
            }
            const tabTriggers = document.querySelectorAll('.tab-trigger');
            const tabContent = document.getElementById('tabContent');

            tabTriggers.forEach(trigger => {
                trigger.addEventListener('click', () => {
                    tabTriggers.forEach(t => t.classList.remove('active'));
                    trigger.classList.add('active');
                    renderTabContent(trigger.dataset.tab);
                });
            });

            renderTabContent('foods');

            function renderTabContent(tab) {
                let content = '';
                switch (tab) {
                    case 'foods':
                        content = `
                            <div class="card">
                                <h3 class="text-xl font-semibold mb-4">Recommended Foods</h3>
                                <div class="accordion">
                                    ${lifestyleData.foodCategories.map((category, index) => `
                                        <div class="accordion-item">
                                            <button class="accordion-trigger" data-index="${index}">
                                                <div class="flex items-center">
                                                    <i data-lucide="${category.icon}" class="w-6 h-6 mr-2"></i>
                                                    <span>${category.name}</span>
                                                </div>
                                                <i data-lucide="chevron-down" class="w-5 h-5"></i>
                                            </button>
                                            <div class="accordion-content">
                                                <ul class="list-disc list-inside pl-4 py-2">
                                                    ${category.foods.map(food => `<li>${food}</li>`).join('')}
                                                </ul>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                        break;
                    case 'meal-plan':
                        content = `
                            <div class="card">
                                <h3 class="text-xl font-semibold mb-4">Sample Meal Plan</h3>
                                <div class="space-y-4">
                                    ${lifestyleData.mealPlan.map(meal => `
                                        <div>
                                            <h4 class="font-semibold text-lg mb-2">${meal.meal}</h4>
                                            <ul class="list-disc list-inside">
                                                ${meal.options.map(option => `<li>${option}</li>`).join('')}
                                            </ul>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                        break;
                    case 'benefits':
                        content = `
                            <div class="card">
                                <h3 class="text-xl font-semibold mb-4">Benefits</h3>
                                <ul class="list-disc list-inside">
                                    ${lifestyleData.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                        break;
                    case 'considerations':
                        content = `
                            <div class="card">
                                <h3 class="text-xl font-semibold mb-4">Considerations</h3>
                                <ul class="list-disc list-inside">
                                    ${lifestyleData.considerations.map(consideration => `<li>${consideration}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                        break;
                }
                tabContent.innerHTML = content;
                lucide.createIcons();
                initializeAccordion();
            }
        }

        function initializeAccordion() {
            const accordionTriggers = document.querySelectorAll('.accordion-trigger');
            accordionTriggers.forEach(trigger => {
                trigger.addEventListener('click', () => {
                    const content = trigger.nextElementSibling;
                    const icon = trigger.querySelector('[data-lucide="chevron-down"]');
                    content.classList.toggle('active');
                    icon.style.transform = content.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0)';
                });
            });
        }

        function renderAIChecker() {
            if (!lifestyleData) {
                console.error("Lifestyle data is not available");
                return;
            }
            const aiCheckerCard = document.getElementById('aiCheckerCard');
            aiCheckerCard.innerHTML = `
                <h3 class="text-xl font-semibold mb-4">Lifestyle Compatibility Checker</h3>
                <div class="flex space-x-2 mb-4">
                    <input type="text" id="foodInput" placeholder="Enter a food to check..." class="flex-grow p-2 border rounded">
                    <button id="checkButton" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">Check</button>
                </div>
                <div id="aiResponse" class="hidden p-4 rounded-md"></div>
            `;

            const foodInput = document.getElementById('foodInput');
            const checkButton = document.getElementById('checkButton');
            const aiResponse = document.getElementById('aiResponse');

            checkButton.addEventListener('click', () => {
                const food = foodInput.value.trim();
                if (food) {
                    checkFood(food);
                }
            });
        }

        async function checkFood(food) {
    try {
        let API;
        const thingsRef = firebase.firestore().collection('API');

        const unsubscribe = thingsRef.onSnapshot(async querySnapshot => {
            if (!querySnapshot.empty) {
                API = querySnapshot.docs[0].data().API; // Get the first document's API
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API}`,
                    },
                    body: JSON.stringify({
                        model: "gpt-4o-mini",
                        messages: [{ role: "user", content: `Is ${food} good for ${lifestyleData.name}? Give the answer in 40 words or less.` }]
                    })
                });
                const data = await response.json();
                aiResponse.classList.remove('hidden');
                aiResponse.innerHTML = `<p>${data.choices[0].message.content}</p>`;
                console.log(data.choices[0].message.content);
            } else {
                console.error("No API key found");
            }
        });
        // Unsubscribe from the listener when done
        return () => unsubscribe();
    } catch (error) {
        console.error("Error checking food:", error);
    }
}

document.addEventListener('DOMContentLoaded', function() {
    initializeApp();
    initializeDarkMode();
});

async function generateDailyMealPlan() {
    try {
        console.log("Starting to generate daily meal plan...");
        const user = firebase.auth().currentUser;
        if (!user) {
            console.error("User is not signed in");
            return;
        }

        console.log("User is signed in. Fetching user data...");
        const userDoc = await db.collection('userData').doc(user.uid).get();
        if (!userDoc.exists) {
            console.error("User data not found");
            return;
        }
        const userData = userDoc.data();
        const height = userData.Height; // in cm
        const weight = userData.Weight; // in kg
        const bmi = (weight / ((height / 100) ** 2)).toFixed(2); // BMI calculation
        console.log(`User's height: ${height}, weight: ${weight}, calculated BMI: ${bmi}`);

        const cuisine = document.getElementById('cuisineInput').value;
        const caloriesIntake = document.getElementById('caloriesintakeperday').textContent;
        console.log(`Cuisine input: ${cuisine}, Daily calorie intake: ${caloriesIntake}`);
        
        const thingsRef = db.collection('API');
        const querySnapshot = await thingsRef.get();
        if (querySnapshot.empty) {
            console.error("API key not found");
            return;
        }
        const apiDoc = querySnapshot.docs[0].data(); // Access the first document's data
        const API = apiDoc.API; 
        console.log(`Fetched API key: ${API}`);

        const response = await fetch('https://api.openai.com/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${API}`,
            },
            body: JSON.stringify({
                model: "gpt-4o",
                messages: [{ 
                    role: "user", 
                    content: `Generate a meal plan for a single day for a ${lifestyleData.name} diet based on a BMI of ${bmi}. Only use foods from ${cuisine} cuisine. Include breakfast, lunch, dinner, and snacks with respective food names, calories, protein, carbs, fats, and micronutrients. Ensure that breakfast is included and the total for the day's meals adds up to the following daily intake:
                    Daily consumption:
                    ${JSON.stringify(lifestyleData.macronutrients)} per day,
                    ${JSON.stringify(lifestyleData.keyNutrients)} per day,
                    ${caloriesIntake} calories per day.
                    Format the response ONLY as a CSV with columns: Meal Name, Food Name, Calories, Protein, Carbs, Fats, Micronutrients. Do not include any other text or explanations. Only provide the content without any headings.` 
                }]
            })
        });

        const data = await response.json();
        console.log("Received response from OpenAI API.");
        console.log("Raw API response:", data.choices[0].message.content);

        if (!data.choices || data.choices.length === 0) {
            console.error("Invalid response from OpenAI API");
            return;
        }

        const mealPlanRaw = data.choices[0].message.content;
        const csvContent = mealPlanRaw.replace(/```csv\n|\n```/g, ''); // Remove CSV code block markers

        // Parse CSV content
        const mealPlanLines = csvContent.trim().split('\n').slice(1); // Remove header

        // Visualize the meal plan in a table
        const mealPlanTable = document.getElementById('MealPlanTable');
        if (!mealPlanTable) {
            console.error("Meal plan table element not found");
            return;
        }
        // Make the table visible
        mealPlanTable.innerHTML = `
            <thead class="bg-gray-200">
                <tr class="text-left">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th class="px-4 py-2">Meal</th>
                            <th class="px-4 py-2">Calories</th>
                            <th class="px-4 py-2">Protein</th>
                            <th class="px-4 py-2">Carbs</th>
                            <th class="px-4 py-2">Fats</th>
                            <th class="px-4 py-2">Micronutrients</th>
                        </tr>
                    </thead>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-300">
                ${mealPlanLines.map((line, index) => {
                    const parts = line.split(',');
                    // Ignore empty lines
                    if (parts.length === 1 && parts[0].trim() === '') {
                        return '';
                    }
                    const [meal, calories, protein, carbs, fats, micronutrients] = parts;
                    const isTotalRow = index === mealPlanLines.length - 1; // Check if it's the last row
                    return `
                        <tr class="${isTotalRow ? 'total-row' : ''}">
                            <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">${meal.trim()}</td>
                            <td class="px-6 py-4">${calories.trim()}</td>
                            <td class="px-6 py-4">${protein.trim()}</td>
                            <td class="px-6 py-4">${carbs.trim()}</td>
                            <td class="px-6 py-4">${fats.trim()}</td>
                            <td class="px-6 py-4">${micronutrients.trim()}</td>
                        </tr>
                    `;
                }).filter(Boolean).join('')}
            </tbody>
        `;

        const overviewCard = document.getElementById('MealPlanTableDIV');
        if (overviewCard) {
            overviewCard.appendChild(mealPlanTable);
        } else {
            console.error("Overview card element not found");
        }

        // Add some basic styling to highlight total rows
        const style = document.createElement('style');
        style.textContent = `
            .total-row {
                font-weight: bold;
                background-color: #f0f0f0; /* Highlight only the total row */
            }
        `;
        document.head.appendChild(style);

    } catch (error) {
        console.error("Error generating daily meal plan:", error);
    }
}
    </script>
</body>
</html>